// Generated by CoffeeScript 1.7.1
(function() {
  module.exports = function(CronJob, schedule, mailer, _, sio, ladder, moment, social, appKeys, xp, notifs) {
    var dailyLadder, dailyXpAM, dailyXpPM, monthlyLadder, weekLadder;
    dailyXpAM = new CronJob({
      cronTime: "00 00 06 * * *",
      onComplete: function() {
        return console.log('job completed dailyXp' + new Date());
      },
      onTick: function() {
        return xp.updateDaily(function(result) {
          return mailer.cLog('[Cyf-auto] Daily xp update done', result);
        });
      },
      start: true
    });
    dailyXpPM = new CronJob({
      cronTime: "00 00 18 * * *",
      onComplete: function() {
        return console.log('job completed dailyXp' + new Date());
      },
      onTick: function() {
        return xp.updateDaily(function(result) {
          return mailer.cLog('[Cyf-auto] Daily xp update done', result);
        });
      },
      start: true
    });
    dailyLadder = new CronJob({
      cronTime: "00 30 12 * * 0-6",
      onComplete: function() {
        return console.log('job completed Daily Ladder ' + new Date());
      },
      onTick: function() {
        var daily;
        daily = 1;
        return ladder.generateLadder(daily, function() {
          return ladder.rankUser(daily, function(top3) {
            return ladder.spreadUsersSocial(daily, function() {
              return ladder.spreadLadder(top3, daily, function(done) {
                mailer.cLog('[Cyf-auto] Daily Ladder for ' + moment().subtract('d', 1).format("ddd Do MMM"), done);
                return console.log(done);
              });
            });
          });
        });
      },
      start: true
    });
    weekLadder = new CronJob({
      cronTime: "00 10 6 * * 0",
      onComplete: function() {
        return console.log('job completed Weekly Ladder ' + new Date());
      },
      onTick: function() {
        var weekly;
        weekly = 2;
        return ladder.generateLadder(weekly, function() {
          return ladder.rankUser(weekly, function(top3) {
            return ladder.spreadUsersSocial(weekly, function() {
              return ladder.spreadLadder(top3, weekly, function(done) {
                return mailer.cLog('[Cyf-auto] Weekly Ladder for ' + moment().subtract('w', 1).format("w"), done);
              });
            });
          });
        });
      },
      start: true
    });
    return monthlyLadder = new CronJob({
      cronTime: "00 10 08 1 * *",
      onComplete: function() {
        return console.log('job completed Monthly Ladder ' + new Date());
      },
      onTick: function() {
        var monthly;
        monthly = 3;
        return ladder.generateLadder(monthly, function() {
          return ladder.rankUser(monthly, function(top3) {
            return ladder.spreadUsersSocial(monthly, function() {
              return ladder.spreadLadder(top3, monthly, function(done) {
                return mailer.cLog('[Cyf-auto] Monthly Ladder for ' + moment().subtract('m', 1).format("MMMM GGGG"), done);
              });
            });
          });
        });
      },
      start: true
    });
  };

}).call(this);
