<!doctype html>
<html>
<head>
	<% include statics/headers %>
    <!-- Start General metas -->
    <meta name="url" content="http://www.cyf-app.co">
    <meta name="language" content="EN">
    <meta name="reply-to" content="cyf.app@gmail.com">
    <meta name="rating" content="General">
    <meta name="keywords" content="signup, challenge, challenge friends, cyf, gaming, competition, e-sport, league of legend, dota, dota 2, champion">
    <meta name="title" content="List of challengers on Challenge your friends">
    <meta name="description" content="See who is playing on Challenge your Friends, discover new friends and find new opponents to challenge today! View your online friends live.">
    <!-- End General metas -->
    <!-- Start Open Graph metas -->
    <meta property="og:type" content="article"> <!-- website/article/profile -->
    <meta property="og:url" content="http://cyf-app.co/signup">
    <meta property="og:site_name" content="Challenge your Friends"/>
    <meta property="og:image" content="http://cyf-app.co/img/icon_big.png">
    <meta property="og:image:width" content="200">
    <meta property="og:title" content="List of challengers on Challenge your friends">
    <meta property="og:description" content="See who is playing on Challenge your Friends, discover new friends and find new opponents to challenge today! View your online friends live.">
    <!-- End Open Graph -->
    <!-- Start Twitter Card Meta -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@cyf_app">
    <meta name="twitter:image" content="http://cyf-app.co/img/icon_big.png">
    <meta name="twitter:image:width" content="200">
    <meta name="twitter:title" content="List of challengers on Challenge your friends">
    <meta name="twitter:description" content="See who is playing on Challenge your Friends, discover new friends and find new opponents to challenge today! View your online friends live.">
	<title>List of challengers - Challenge your friends</title>
</head>
<body>

	<% include statics/navTop %>
	<script type="text/javascript">
		var myFriendList = [];

		<%
		var _friendList = [];
		if (currentUser) { 

			if (currentUser.friends.length > 0) {

				for (var i = 0; i < currentUser.friends.length; i++) {
					_friendList.push(currentUser.friends[i].idUser.toString());
					%>
					myFriendList.push('<%= currentUser.friends[i].idUser.toString() %>');
					<%
				}
			}
		} %>
	</script>

	<div class="canvas">
		

		<div class="container">
			<div class="row">
				<div class=" col-lg-3 col-md-3 col-sm-6 col-xs-12">
					<input type="search" class="form-control" id="filterUsers" placeholder="Search." rel="tooltip" data-placement="bottom" data-title="try 'friends' or 'league' or 'moba'">
				</div>
				<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
				<br>
				<br>
					<ul class="userlist container">
						<div class="row">						
							<% for(var i=0; i< users.length; i++) { 
								if(users[i]._id.toString() != currentUser._id) { %>
								
								<li class="media col-md-4 col-xs-6 card-user <%= users[i].local.pseudo.replace(/\s+/g, '').toLowerCase() %> <% if(users[i].games && users[i].games.length > 0) {for (var g = users[i].games.length - 1; g >= 0; g--) {%><%= users[i].games[g].title.replace(/\s+/g, '').toLowerCase() %> <%= users[i].games[g].type.replace(/\s+/g, '').toLowerCase() %><% }} %> <%= _friendList.indexOf(users[i]._id.toString()) > -1 ? 'friend' :'' %>">

										<a class="pull-left" href="/u/<%= users[i].idCool %>">
											<img src="<%= users[i].icon %>" class="img-rounded">
										</a>

										<div class="media-body">
											<h4 class="media-heading col-lg-12"> 
												<% if(_friendList.indexOf(users[i]._id.toString()) > -1) { %>
												<span class="<%= (users[i].isOnline === true) ? "online" : "offline" %>"></span>
												<% } %>
												<a href="/u/<%= users[i].idCool %>">
													<%= users[i].local.pseudo %>
												</a>
											</h4>
											<div class="col-lg-12">
												<% if(_friendList.indexOf(users[i]._id.toString()) > -1) { %>
												<span class="badge alert-success">Friend</span>
												<% } %>


												<span class="badge alert-warning">level <%= users[i].level %></span>
												<% if(_friendList.indexOf(users[i]._id.toString()) > -1) { %>
												<span class="badge alert-warning"><%= users[i].friends.length %> friends</span>		
												<% } %>	
											</div>
											<div class="col-lg-12">	
												<% if(users[i].games && users[i].games.length > 0) {
													 for (var g = users[i].games.length - 1; g >= 0; g--) { 
													%>
													<!-- <span id="<%= users[i].games[g]._idGame %>"></span>  -->
													<small class="color-<%= users[i].games[g].type %>"><%= users[i].games[g].title %>,</small>
												<% }
												} %>
											</div>
										</div>
								</li>
								<% } 
							} %>
						</div>
					</ul>	
				</div>

			</div>

		</div>
		<% include statics/footers %>
		<script type="text/javascript">
		$(function () {
			$("#filterUsers").on('input', function () {
				var query = $(this).val()
				,	cards = $('.card-user');
				if($(this).val().length <= 1)
					cards.show();
				else {
			  	cards.hide();
			  	return filterThis(cards,query);
				}
			});
		});

		</script>
	</body>
	</html>